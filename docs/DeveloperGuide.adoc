= A.T.A.S (Amazing Task and Assignment System) Developer Guide
:site-section: UserGuide
:toc:
:toclevels: 4
:toc-title: Contents
:toc-placement: preamble
:sectnums:
:imagesDir: images
:stylesDir: stylesheets
:xrefstyle: full
:experimental:
ifdef::env-github[]
:tip-caption: :bulb:
:note-caption: :information_source:
:warning-caption: :warning:
endif::[]

By: `Team M16-1` Since: `Jan 2020` License: `MIT`

== Design
This section will give a high-level overview of how various components in ATAS function and interact with each other.

=== Architecture
The following sections will explain each component in greater detail.

=== Atas Component
The sequence diagram below shows how various components in the Atas class interact when the user enters a `help` command
image::Atas help command sequence diagram v2.PNG[Component interactions for help command]

The Atas Class contains the main logic for ATAS. +
1. Atas uses the UI class to read user input. +
2. The Parser class is used to parse the user input string, returning a Command object. +
3. The Command's execute() method is run, returning a CommandResult object. +
4. Atas then uses the UI class to show the CommandResult's message to the user. +
5. Finally, Atas uses the Storage object to save the new state of the application.


=== UI Component

=== Parser Component
image::parser class diagram v1.PNG[Parser Class Diagram]
1. The Atas class uses the Parser class' static parseCommand() method to parse user commands. +
2. The Parser class' parseCommand() method then returns the appropriate Command object depending on the user input.

=== Storage Component
image::storage.PNG[Storage Class Diagram]
1. A Storage object is created by the Atas class to handle the loading and saving of task data.
2. The load() method is used to read saved data from a local file into the current session of ATAS.
3. The save() method writes the current state of ATAS into the local save file using the Task.encodeTask() method.

=== Command Component

=== CommandResult Component

== Implementation
=== Delete Command
image::delete.png[Delete Command sequence diagram]

*Step 1.* +
The Parser Class will call `prepareDeleteCommand` method and processes the delete index once it detects a `delete` command.

[WARNING]
If an `IndexOutOfBoundsException` or `NumberFormatException is detected`, the Parser class will create a new `IncorrectCommand` class
to display the corresponding error messages

*Step 2.* +
`prepareDeleteCommand` will create a new `DeleteCommand` class.

[WARNING]
If there is no items in the task list, the `DeleteCommand` class will create a new `IncorrectCommand` class to display the
corresponding error message

*Step 3.* +
`DeleteCommand` class will call the `TaskList` class to get the updated task list and deletes the task corresponding to the index.

=== Search Command
*Step 1.* +
The Parser Class will call `prepareDeleteCommand` method and process the `task type` and `search query`

[NOTE]
`task type` refers to `all`,`event' or `assignment`

*Step 2.* +
`prepareSearchCommand method` will create a new `SearchCommand` class

*Step 3.* +
`SearchCommand` class will check the `task type` and calls their respective methods. In each of the respective methods, an ArrayList is used
to store the original index of the results.

* If `task type` is *all*, `SearchCommand` class will call the `getSearchQueryAllTasks` method and returns an ArrayList of the results.

* if `task type` is *event*, `SearchCommand` class will call the `getSearchQueryEvents` method and returns an ArrayList of the results.
This section will detail how some noteworthy features are implemented.

* if `task type` is *assignment*, `SearchCommand` class will call the `getSearchQueryAssignments` and returns an ArrayList of all the results.

*Step 4.* +
`SearchCommand` class calls the `searchList` method to format the results of the search query into a String format

*Step 5.* +
`SearchCommand` class calls the `resultsList` method to print the results of the search query, and creates a new `IncorrectCommand`
class to print the success message


[WARNING]
if there are no results to the search query or if there are no tasks in the task list, `SearchCommand` class
will create a new `IncorrectCommand` class to print the error messages

=== Calendar

=== Edit Task Feature
==== Implementation
The `EditCommand` class extends the `Command` class by provided functions to edit specific tasks in the list of
*ATAS*.

Given below is an example usage scenario and how the `EditCommand` class behaves at each step/

*Step 1* +
The user types in `edit 1`. The `parseCommand` method of the `Parser` class is called to obtain `edit` which is the type
of command the user is entering.

[WARNING]
An `IncorrectCommand` class will be returned and an `UNKNOWN_COMMAND_ERROR` string from the `Messages` class will be passed
into the constructor of that class if the command supplied was invalid.

*Step 2* +
The `parseCommand` method subsequently calls the  `prepareEditCommand` method inside the same `Parser` class. This method
splits the `fullCommand` string parameters into 2 tokens. The integer `1` will be obtained as the *Index* of the task
specified in the list. This method returns a new instance `EditCommand` class, passing the integer `1` as the parameter.

[WARNING]
An `IncorrectCommand` class will be returned and a `NUM_FORMAT_ERROR` string from the `Messages` class will be passed
into the constructor of that class if the number supplied was not an *integer*. +
An `IncorrectCommand` class will be returned and a `INCORRECT_ARGUMENT_ERROR` string from the `Messages` class will be passed
into the constructor of that class if there are no task index supplied by the user. +

*Step 3* +
A new instance of `EditCommand` class is returned to the main method of *ATAS* with paremter `1` as described above.
The execute method of the `EditCommand` class is now called.

*Step 4* +
The `execute` method in the `EditCommand` class first gets an input from the user on the details of the edited task.

[TIP]
Assignment Command Format: `assignment n/[NAME] m/[MODULE] d/DD/MM/YY HHmm c/[COMMENtS]`
Event Command Format: `event n/[NAME] l/[LOCATION] d/DD/MM/YY HHmm - HHmm c/[COMMENTS]`

*Step 5* +
If the user supplies an `assignment` command, the `editAssignment` method will be invoked. This method extracts the
`assignmentName`, `moduleName`, `dateTime` and `comments` string to return a new instance of an  `Assignment` class. +

If the user supplies an `event` command, the `editEvent` method will be invoked. This method extracts the
`eventName`, `location`, `startDateTime`, `endDateTime` and `comments` string to return a new instance of an `Event` class.

*Step 6* +
This new instanced class (either `Assignment` or `Event`) will be passed into the method `editTask` of the `TaskList` class.
The `editTask` method of the `TaskList` class uses Java's `ArrayList` `set` method to replace the task.

*Step 7* +
Finally, a `CommandResult` class is returned with `EDIT_SUCCESS_MESSAGE` passed as the parameter to the constructor of
that class. 











